{% extends "base.html" %}
{% block titel %}{{titel}}{%endblock%}
{% block content%}
<script>
    var socket = io.connect('/');
    // var socket = io.connect('http://' + document.domain + ':' + location.port);
    $(document).ready(function() {
        if (socket.connected){
            socket.emit('get_users');
        }
        else{
            socket.on('connect', function() {
                socket.emit('socket_connect');
            });
        }
        console.log('Connected');
        socket.emit('get_status');
    });

    socket.on('send_users', function(data) {
        document.getElementById("users").innerHTML = data;
        console.log(data);
    });

    socket.on('status', function(data) {
        sensor = JSON.parse(data);
        document.getElementById("led").innerHTML = sensor.test;
        console.log(data);
    });
    setInterval(myTimer, 1000);

    function myTimer() {   
        socket.emit('get_sensor_data');
    };

</script>
<h1>FANCY BOIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII</h1>
<p>Groetjes NIEMAND</p>
<p>{{test}}</p>
<div class="col-1">
    <div id='users'></div>
    <p>LED: <div id='led'></div></p>
</div>
{% endblock %}